(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{8229:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/swap",function(){return t(80)}])},80:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return be}});var o=t(828),r=t(5893),i=t(7294),u=t(6527),c=t(8635),a=t(1258),l=t(722);var s=t(8663),d=t(794),f=t(5539),p=t(4088),m=t(4060),v=t(2515),x=t(3393),h=t(2927),Z=t(8397),b=t(1999),g=t(7055);var y=t(1163),w=t(1569),S=t(9643),P=t(8143),k=t(8337),C=t(2693),j=t(502),A=t(8083);var E=t(1450),N=t(2701),I=t(1681),T=t(9775),B=t(6361),R=t(4734),M=t(9673),q=t(7568),D=t(4924),L=t(6042),F=t(4051),V=t.n(F),K=t(20),_=t(4475),O=t(2933),W=t(6012),z=t(960),Y=t(7855),H=t(8155),U=t(9039),X=t(8764).Buffer;function $(e){return G.apply(this,arguments)}function G(){return G=(0,q.Z)(V().mark((function e(n){var t,r,i,u,c,a,l,s,d=arguments;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>1&&void 0!==d[1]?d[1]:W.Z.getState().connection,r=d.length>2&&void 0!==d[2]?d[2]:f.Z.getState().currentWallet,i=d.length>3&&void 0!==d[3]?d[3]:z.Z.getState().program,!(t&&r&&i)){e.next=27;break}return e.prev=2,e.t0=o.Z,e.next=6,Y.rV.PublicKey.findProgramAddress([X.from(z.u),X.from(n.pair),new H.PublicKey(n.baseMint).toBuffer(),new H.PublicKey(n.quoteMint).toBuffer()],i.programId);case 6:return e.t1=e.sent,u=(0,e.t0)(e.t1,1),c=u[0],e.next=11,i.account.config.fetch(c);case 11:return a=e.sent,e.next=14,(0,U.ny)(t,new H.PublicKey(n.baseVault));case 14:return l=e.sent,e.next=17,(0,U.ny)(t,new H.PublicKey(n.quoteVault));case 17:return s=e.sent,e.abrupt("return",{freeze:a.freezeProgram,freeze_liquidity:a.freezeLiquidity,freeze_swap:a.freezeSwap,baseReserve:(0,U.HE)(null!==l&&void 0!==l?l:0,n.baseDecimals),quoteReserve:(0,U.HE)(null!==s&&void 0!==s?s:0,n.quoteDecimals),lpSupply:a.totalAmountMinted,feeNumerator:a.feeNumerator,feeDenominator:a.feeDenominator});case 21:return e.prev=21,e.t2=e.catch(2),console.error(e.t2),e.abrupt("return",void 0);case 25:e.next=28;break;case 27:return e.abrupt("return",void 0);case 28:case"end":return e.stop()}}),e,null,[[2,21]])}))),G.apply(this,arguments)}var J=t(78);function Q(){var e=(0,y.useRouter)().pathname,n=(0,W.Z)((function(e){return e.connection})),t=(0,f.Z)((function(e){return e.currentWallet})),o=(0,z.Z)((function(e){return e.program})),r=(0,m.Z)((function(e){return e.coin1})),u=(0,m.Z)((function(e){return e.coin2})),c=(0,m.Z)((function(e){return e.coin1Amount})),a=(0,m.Z)((function(e){return e.coin2Amount})),l=(0,m.Z)((function(e){return e.refreshCount})),s=(0,m.Z)((function(e){return e.directionReversed})),d=s?"coin2":"coin1",v=(0,p.Z)((function(e){return e.slippageTolerance})),h=(0,f.Z)((function(e){return e.connected})),Z=s?u:r,b=(s?a:c)||"0",g=s?r:u,S=(s?c:a)||"0",P=(0,w.Z)((function(e){return e.poolInfos}));(0,i.useEffect)((function(){ee.clear()}),[l]),(0,O.Z)((0,q.Z)(V().mark((function r(){var i,u,c,a,l,s,f,p,h,y,w,P,k,C,j,A,E,N,I,T,B,R,M;return V().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(Z&&g&&n&&e.startsWith("/swap")){r.next=3;break}return m.Z.setState((0,L.Z)({fee:void 0,minReceived:void 0,maxSpent:void 0,priceImpact:void 0,executionPrice:void 0},(0,D.Z)({},"coin1"===d?"coin2Amount":"coin1Amount",void 0))),r.abrupt("return");case 3:return i="up",r.prev=4,r.next=7,ne({upCoin:Z,upCoinAmount:b,downCoin:g,connection:n,slippageTolerance:v,wallet:t,program:o});case 7:if(u=r.sent,c=function(){var e=m.Z.getState().directionReversed,n=(e?m.Z.getState().coin2Amount:m.Z.getState().coin1Amount)||"0",t=(e?m.Z.getState().coin1Amount:m.Z.getState().coin2Amount)||"0",o="up"===i?n:t,r="up"===i?b:S;return(0,x.eq)(o,r)}(),c){r.next=11;break}return r.abrupt("return");case 11:"up"===i?(l=(a=null!==u&&void 0!==u?u:{}).priceImpact,s=a.executionPrice,f=a.currentPrice,p=a.swapable,h=a.fee,w=null!==(y=null===u||void 0===u?void 0:u.info)&&void 0!==y?y:{},P=w.amountOut,k=w.minAmountOut,m.Z.setState((0,L.Z)({fee:h,priceImpact:l,executionPrice:s,currentPrice:f,minReceived:k,maxSpent:void 0,swapable:p},(0,D.Z)({},"coin1"===d?"coin2Amount":"coin1Amount",P)))):(j=(C=null!==u&&void 0!==u?u:{}).priceImpact,A=C.executionPrice,E=C.currentPrice,N=C.swapable,I=C.fee,B=null!==(T=null===u||void 0===u?void 0:u.info)&&void 0!==T?T:{},R=B.amountIn,M=B.maxAmountIn,m.Z.setState((0,L.Z)({fee:I,priceImpact:j,executionPrice:A,currentPrice:E,minReceived:void 0,maxSpent:M,swapable:N},(0,D.Z)({},"coin1"===d?"coin2Amount":"coin1Amount",R)))),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(4),console.error(r.t0);case 17:case"end":return r.stop()}}),r,null,[[4,14]])}))),[Z,g,b,S,s,d,v,n,t,o,e,l,h,P])}var ee=new Map;function ne(e){return te.apply(this,arguments)}function te(){return te=(0,q.Z)(V().mark((function e(n){var t,o,r,i,u,c,a,l,s,d,f,p,m,v,x,h,Z,b,g;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.upCoin,o=n.upCoinAmount,r=n.downCoin,i=n.connection,u=n.slippageTolerance,c=n.wallet,a=n.program,l=(0,_.n)(t,o,{alreadyDecimaled:!0}),e.next=4,w.Z.getState().findLiquidityInfoByTokenMint(t.mint,r.mint);case 4:if(!(s=e.sent.best)){e.next=22;break}if(d=s.id,!ee.has(d)){e.next=11;break}e.t0=ee.get(d),e.next=14;break;case 11:return e.next=13,(0,q.Z)(V().mark((function e(){var n;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(s,i,c,a);case 2:return(n=e.sent)&&ee.set(d,n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))();case 13:e.t0=e.sent;case 14:if(!(f=e.t0)){e.next=21;break}return p=J.h.getBestAmountOut({poolInfo:s,poolParsedInfo:f,currencyOut:(0,N.et)(r),amountIn:(0,N.wO)(l),slippage:(0,K.y)(u)}),m=p.amountOut,v=p.minAmountOut,x=p.executionPrice,h=p.currentPrice,Z=p.priceImpact,b=p.fee,g=J.h.getEnabledFeatures(f).swap,e.abrupt("return",{executionPrice:x,currentPrice:h,priceImpact:Z,swapable:g,fee:b,info:{amountOut:(0,N.wE)(m).toExact(),minAmountOut:(0,N.wE)(v).toExact()}});case 21:return e.abrupt("return",void 0);case 22:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}var oe=t(5695),re=t(906),ie=t(594),ue=t(4580);function ce(e,n){try{var t,o=(0,ie.Z)(null!==e&&void 0!==e?e:0),r=o.mul((null===n||void 0===n?void 0:n.alreadyPercented)?1:100).toFixed(null!==(t=null===n||void 0===n?void 0:n.fixed)&&void 0!==t?t:2);return(0,x.eq)(o,0)?"0%":(null===n||void 0===n?void 0:n.exact)||"0.00"!==r?(null===n||void 0===n?void 0:n.alwaysSigned)?"".concat((i=r,(0,x.gt)(i,0)?"+":"-")).concat((0,ue.Z)(function(e){return(0,x.gt)(e,0)?(0,j.B)(e):(0,j.B)((0,E.dC)(e,-1))}(r)),"%"):"".concat((0,ue.Z)(r),"%"):(null===n||void 0===n?void 0:n.alwaysSigned)?"<+0.01%":"<0.01%"}catch(u){return"0%"}var i}var ae=t(2670),le=t(4025),se=t(602),de=t(3029),fe=t(8764).Buffer;function pe(){return new Promise((function(e){return(0,q.Z)(V().mark((function n(){var t,r,i,u,c,a,l,s,d,h,Z,b,g,y,P,k,C,j,A,E,N,I,T,B,R,M,q,D,L,F,K,O,U,X,$;return V().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=f.Z.getState(),r=t.checkWalletHasEnoughBalance,i=t.owner,u=t.getTokenAccount,c=z.Z.getState().program,a=W.Z.getState().connection,l=v.ZP.getState().getToken,!p.Z.getState().isApprovePanelShown){n.next=7;break}return n.abrupt("return");case 7:return s=m.Z.getState(),d=s.coin1,h=s.coin2,Z=s.coin1Amount,b=s.coin2Amount,g=s.directionReversed,s.minReceived,s.maxSpent,y=w.Z.getState().findLiquidityInfoByTokenMint,p.Z.setState({isApprovePanelShown:!0}),n.prev=10,(0,se.Z)(a,"no rpc connection"),(0,se.Z)(c,"market not found"),(0,se.Z)(i,"wallet not found"),P=g?h:d,k=(g?b:Z)||"0",C=g?d:h,j=(g?Z:b)||"0",(0,se.Z)(k&&(0,x.gt)(k,0),"should input upCoin amount larger than 0"),(0,se.Z)(j&&(0,x.gt)(j,0),"should input downCoin amount larger than 0"),(0,se.Z)(P,"select a coin in upper box"),(0,se.Z)(C,"select a coin in lower box"),(0,se.Z)(String(P.mint)!==String(C.mint),"should not select same mint "),A=(0,_.n)(P,k,{alreadyDecimaled:!0}),E=(0,_.n)(C,j,{alreadyDecimaled:!0}),(0,se.Z)(r(A),"not enough ".concat(P.symbol)),n.next=28,y(null===d||void 0===d?void 0:d.mint,null===h||void 0===h?void 0:h.mint);case 28:return N=n.sent.best,(0,se.Z)(N,"can't find pool"),I=l(N.baseMint),(0,se.Z)(I,"can't find base token in tokenList"),T=l(N.quoteMint),(0,se.Z)(T,"can't find quote token in tokenList"),B=u(N.baseMint),R=u(N.quoteMint),(0,se.Z)(null===B||void 0===B?void 0:B.publicKey,"user haven't base token's account"),(0,se.Z)(null===R||void 0===R?void 0:R.publicKey,"user haven't quote token's account"),M=new H.PublicKey(N.baseMint),q=new H.PublicKey(N.quoteMint),D=new H.PublicKey(N.baseVault),L=new H.PublicKey(N.quoteVault),F=new H.PublicKey(N.authority),n.t0=o.Z,n.next=46,Y.rV.PublicKey.findProgramAddress([fe.from(z.u),fe.from(N.pair),new H.PublicKey(N.baseMint).toBuffer(),new H.PublicKey(N.quoteMint).toBuffer()],c.programId);case 46:return n.t1=n.sent,K=(0,n.t0)(n.t1,1),O=K[0],n.next=51,c.methods.swap(N.pair,A.raw,E.raw,g?1:0).accounts({owner:i,config:O,tokenXMint:M,tokenYMint:q,tokenXVault:D,tokenYVault:L,poolAuthority:F,userTokenXVault:B.publicKey,userTokenYVault:R.publicKey,tokenProgram:de.H_}).rpc();case 51:return U=n.sent,n.next=54,a.confirmTransaction(U,"finalized");case 54:e({allSuccess:!0,txid:U}),n.next=65;break;case 57:n.prev=57,n.t2=n.catch(10),X=S.Z.getState().logError,console.warn(n.t2),"Error",$=(0,ae.Z)(n.t2,Error)?(0,le.v)(n.t2.message):String(n.t2),X("Error",$),e({allSuccess:!1,txid:""});case 65:return n.prev=65,p.Z.setState({isApprovePanelShown:!1}),n.finish(65);case 68:case"end":return n.stop()}}),n,null,[[10,57,65,68]])})))()}))}var me=(0,d.Z)({coinInputBox1ComponentRef:(0,i.createRef)(),coinInputBox2ComponentRef:(0,i.createRef)(),swapButtonComponentRef:(0,i.createRef)()}),ve=me.ContextProvider,xe=me.useStore;function he(){return function(){var e=(0,v.ZP)((function(e){return e.getToken}));(0,i.useEffect)((function(){var n=m.Z.getState(),t=n.coin1,o=n.coin2;t||(0,g.ZP)(null===o||void 0===o?void 0:o.mint)===(0,g.ZP)(b.i)||m.Z.setState({coin1:e(b.i)}),o||(0,g.ZP)(null===t||void 0===t?void 0:t.mint)===(0,g.ZP)(b.U)||m.Z.setState({coin2:e(b.U)})}),[e])}(),function(){var e=(0,y.useRouter)(),n=e.query,t=e.pathname,o=e.replace,r=(0,m.Z)((function(e){return e.coin1})),u=(0,m.Z)((function(e){return e.coin2})),c=(0,m.Z)((function(e){return e.coin1Amount})),a=(0,m.Z)((function(e){return e.coin2Amount})),l=(0,m.Z)((function(e){return e.focusSide})),s=(0,m.Z)((function(e){return e.directionReversed})),d=(0,w.Z)((function(e){return e.poolInfos})),f=(0,i.useCallback)((function(e){return d.find((function(n){return n.id===e}))}),[d]),x=(0,v.ZP)((function(e){return e.tokens})),h=(0,v.ZP)((function(e){return e.getToken})),Z=(0,v.ZP)((function(e){return e.toUrlMint})),b=(0,p.Z)((function(e){return e.inCleanUrlMode})),g=(0,i.useRef)(!1);(0,i.useEffect)((function(){t.includes("/swap")||(g.current=!1)}),[t]),(0,i.useEffect)((function(){var e=function(){return g.current=!1};return null===globalThis||void 0===globalThis||globalThis.addEventListener("beforeunload",e),function(){return null===globalThis||void 0===globalThis?void 0:globalThis.removeEventListener("beforeunload",e)}}),[]),(0,i.useEffect)((function(){if(t.includes("/swap")&&!g.current){var e,o,r,i,u,c,a,p=String(null!==(o=null!==(e=n.ammId)&&void 0!==e?e:n.ammid)&&void 0!==o?o:""),v=String(null!==(r=n.inputCurrency)&&void 0!==r?r:""),Z=String(null!==(i=n.outputCurrency)&&void 0!==i?i:""),b=String(null!==(u=n.inputAmount)&&void 0!==u?u:""),y=String(null!==(c=n.outputAmount)&&void 0!==c?c:""),w=String(null!==(a=n.fixed)&&void 0!==a?a:"");if(p){var k=S.Z.getState().logWarning,C=f(p);if(C){var j=v?h(v,{exact:!0}):h(Z?null===C||void 0===C?void 0:C.quoteMint:null===C||void 0===C?void 0:C.baseMint),E=Z?h(Z,{exact:!0}):h(v?null===C||void 0===C?void 0:C.baseMint:null===C||void 0===C?void 0:C.quoteMint);(0,P.CW)([v,Z],[String(null===j||void 0===j?void 0:j.mint),String(null===E||void 0===E?void 0:E.mint)])||m.Z.setState((0,A.dI)({coin1:j,coin2:E}))}else d.length>0&&Object.keys(x||{}).length>0&&k("can't find Liquidity pool with url ammId")}else if(v||Z){var N=h(v),I=h(Z);N&&m.Z.setState({coin1:N}),I&&m.Z.setState({coin2:I})}var T=v?b:Z?y:void 0,B=Z?y:v?b:void 0;if(T&&m.Z.setState({coin1Amount:T}),B&&m.Z.setState({coin2Amount:B}),("in"===w||"out"===w)&&(s?"coin2"===l?"in":"out":"coin2"===l?"out":"in")!==w){var R="in"===w?s?"coin2":"coin1":s?"coin1":"coin2";m.Z.setState({focusSide:R})}d.length>0&&Object.values(x).length>0&&(g.current=!0)}}),[t,n,h,x,o,d,f]);var E=(0,i.useCallback)((0,k.P)((function(e,n){o({pathname:e,query:n},void 0,{shallow:!0}).then()}),{delay:100}),[]);(0,i.useEffect)((function(){if(t.includes("/swap")&&g.current&&!b){var e,o,i,d,f,p=r?Z(r):"",m=u?Z(u):"",v=s?m:p,x=s?p:m,h=s?a:c,y=s?c:a,w=(0,A.dI)({inputCurrency:String(null!==(e=n.inputCurrency)&&void 0!==e?e:""),outputCurrency:String(null!==(o=n.outputCurrency)&&void 0!==o?o:""),inputAmount:String(null!==(i=n.inputAmount)&&void 0!==i?i:""),outputAmount:String(null!==(d=n.outputAmount)&&void 0!==d?d:""),fixed:String(null!==(f=n.fixed)&&void 0!==f?f:"")}),S=(0,A.dI)({inputCurrency:v,outputCurrency:x,inputAmount:(0,j.B)(h),outputAmount:(0,j.B)(y),fixed:s?"coin2"===l?"in":"out":"coin2"===l?"out":"in"});!(0,C.Ek)(w,S)&&E(t,S)}}),[b,r,u,c,a,s,l,n,o,t])}(),Q(),null}function Ze(){var e=(0,f.Z)().connected,n=(0,m.Z)((function(e){return e.coin1})),t=(0,m.Z)((function(e){return e.coin2})),c=(0,m.Z)((function(e){return e.coin1Amount})),d=(0,m.Z)((function(e){return e.coin2Amount})),h=(0,f.Z)((function(e){return e.balances})),b=(0,m.Z)((function(e){return e.directionReversed})),g=(0,m.Z)((function(e){return e.priceImpact})),y=(0,m.Z)((function(e){return e.refreshSwap})),w=(0,m.Z)((function(e){return e.swapable})),P=(0,v.ZP)((function(e){return e.refreshTokenPrice})),k=(0,f.Z)((function(e){return e.checkWalletHasEnoughBalance})),C=xe(),A=C.swapButtonComponentRef,E=C.coinInputBox1ComponentRef,N=C.coinInputBox2ComponentRef,B=b?t:n,R=(b?d:c)||"0",q=b?n:t,D=(b?c:d)||"0",L=(0,i.useMemo)((function(){return B&&k((0,_.n)(B,R,{alreadyDecimaled:!0}))}),[B,R,k,h]),F=(0,i.useCallback)((function(){m.Z.setState((function(e){return{directionReversed:!e.directionReversed}}))}),[]),V=(0,m.Z)((function(e){return e.executionPrice})),K=(0,i.useRef)(null),O=(0,i.useRef)(null),W=(0,o.Z)(function(e,n,t){var o,r="all .4s cubic-bezier(0.4, 0, 0.2, 1)",u=(0,i.useState)(null!==(o=null===t||void 0===t?void 0:t.defaultHasWrapped)&&void 0!==o&&o),c=u[0],a=u[1];(0,i.useEffect)((function(){if(!l.N9&&(null===t||void 0===t?void 0:t.defaultHasWrapped)){var o=e.current,r=n.current;if(o&&r){var i=o.getBoundingClientRect(),u=r.getBoundingClientRect(),c=u.top-i.top,a=i.top<u.top?1:-1;o.style.setProperty("transition",""),r.style.setProperty("transition",""),o.style.setProperty("transform","translateY(".concat(c*a,"px)")),r.style.setProperty("transform","translateY(".concat(-c*a,"px)"))}}}),[]);var s=(0,i.useCallback)((function(){var t=e.current,o=n.current;if(t&&o){var i=t.getBoundingClientRect(),u=o.getBoundingClientRect(),l=u.top-i.top,s=i.top<u.top?1:-1;t.style.setProperty("transition",r),o.style.setProperty("transition",r),c?(t.style.setProperty("transform","translateY(0px)"),o.style.setProperty("transform","translateY(0px)"),a(!1)):(t.style.setProperty("transform","translateY(".concat(l*s,"px)")),o.style.setProperty("transform","translateY(".concat(-l*s,"px)")),a(!0))}}),[c,e,n]),d=(0,i.useCallback)((function(){var t=e.current,o=n.current;t&&o&&(t.style.setProperty("transition",r),o.style.setProperty("transition",r),t.style.setProperty("transform","translateY(0px)"),o.style.setProperty("transform","translateY(0px)"))}),[c,e,n]);return(0,i.useEffect)((function(){var t=e.current,o=n.current;null===t||void 0===t||t.addEventListener("transitionstart",(function(){null===t||void 0===t||t.style.setProperty("pointerEvents","none")})),null===t||void 0===t||t.addEventListener("transitionend",(function(){null===t||void 0===t||t.style.setProperty("pointerEvents","")})),null===o||void 0===o||o.addEventListener("transitionstart",(function(){null===o||void 0===o||o.style.setProperty("pointerEvents","none")})),null===o||void 0===o||o.addEventListener("transitionend",(function(){null===o||void 0===o||o.style.setProperty("pointerEvents","")}))}),[e,n]),[c,{toggleSwap:s,resetSwapPosition:d}]}(K,O,{defaultHasWrapped:b}),2),z=W[0],Y=W[1].toggleSwap;(0,i.useEffect)((function(){m.Z.setState({directionReversed:z})}),[z]);var H=n&&(0,x.$u)(c)&&t&&(0,x.$u)(d)&&V,U=(0,i.useRef)(null);(0,i.useEffect)((function(){m.Z.setState({scrollToInputBox:function(){var e;return null===(e=U.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"center"})}})}),[]);var X,$=(0,p.Z)((function(e){return e.isApprovePanelShown}));return(0,r.jsxs)(a.Z,{domRef:U,wrapperClassName:"w-[min(456px,100%)] self-center cyberpunk-bg-light",className:"py-8 pt-4 px-6 mobile:py-5 mobile:px-3",children:[(0,r.jsxs)("div",{className:"space-y-5 mt-5",children:[(0,r.jsx)(Z.Z,{domRef:K,disabled:$,disabledInput:b,componentRef:E,haveHalfButton:!0,haveCoinIcon:!0,showTokenSelectIcon:!0,topLeftLabel:z?"To":"From",onTryToTokenSelect:function(){},onEnter:function(e){var n,o,r,i;e&&(t||null===(n=N.current)||void 0===n||null===(o=n.selectToken)||void 0===o||o.call(n),t&&d&&(null===(r=A.current)||void 0===r||null===(i=r.click)||void 0===i||i.call(r)))},token:n,value:c?(0,x.eq)(c,0)?"":(0,j.B)(c):void 0,onUserInput:function(e){m.Z.setState({focusSide:"coin1",coin1Amount:e})}}),(0,r.jsxs)("div",{className:"relative h-8",children:[(0,r.jsxs)(u.Z,{className:"absolute items-center transition-all ".concat(V?"left-4":"left-1/2 -translate-x-1/2"),children:[(0,r.jsx)(T.Z,{size:"sm",iconSrc:"/icons/msic-swap.svg",className:"p-2 frosted-glass frosted-glass-teal rounded-full mr-4 ".concat($?"not-clickable":"clickable"," select-none transition"),onClick:function(){$||(Y(),F())}}),V&&(0,r.jsx)("div",{className:"absolute left-full",children:(0,r.jsx)(we,{})})]}),(0,r.jsx)("div",{className:"absolute right-0",children:(0,r.jsx)(M.Z,{run:!$,refreshKey:"swap",popPlacement:"right-bottom",freshFunction:function(){y(),P()}})})]}),(0,r.jsx)(Z.Z,{domRef:O,disabled:$,disabledInput:!b,componentRef:N,haveHalfButton:!0,haveCoinIcon:!0,showTokenSelectIcon:!0,topLeftLabel:z?"From":"To",onTryToTokenSelect:function(){},onEnter:function(e){var t,o,r,i;e&&(n||null===(t=E.current)||void 0===t||null===(o=t.selectToken)||void 0===o||o.call(t),n&&c&&(null===(r=A.current)||void 0===r||null===(i=r.click)||void 0===i||i.call(r)))},token:t,value:d?(0,x.eq)(d,0)?"":(0,j.B)(d):void 0,onUserInput:function(e){m.Z.setState({focusSide:"coin2",coin2Amount:e})}})]}),(0,r.jsx)(I.Z,{show:H,children:(0,r.jsx)(ge,{className:"mt-5"})}),(0,r.jsx)(s.Z,{className:"w-full frosted-glass-teal mt-5",disabled:$,componentRef:A,validators:[{should:e,forceActive:!0,fallbackProps:{onClick:function(){return p.Z.setState({isWalletSelectorShown:!0})},children:"Connect Wallet"}},{should:B&&q,fallbackProps:{children:"Select a token"}},{should:!1!==w,fallbackProps:{children:"Pool Not Ready"}},{should:R&&(0,x.$u)(R)&&D&&(0,x.$u)(D),fallbackProps:{children:"Enter an amount"}},{should:L,fallbackProps:{children:"Insufficient ".concat(null!==(X=null===B||void 0===B?void 0:B.symbol)&&void 0!==X?X:""," balance")}},{should:g&&(0,x.G)(g,.05),forceActive:!0,fallbackProps:{onClick:function(){return function(e){var n=e.priceImpact;S.Z.getState().popConfirm({type:"error",title:"Price Impact Warning",description:(0,r.jsxs)("div",{children:["Price impact is"," ",n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-[#DA2EEF]",children:ce(n)})," which is"," "]}):"",(0,r.jsx)("span",{className:"text-[#DA2EEF]",children:"higher than 5%."})," Try a smaller trade!"]}),confirmButtonText:"Swap Anyway",onConfirm:function(){pe().then((function(e){e.allSuccess&&(0,S.Z.getState().logSuccess)("Success","Swap Success!")}))}})}({priceImpact:g})}}}],onClick:function(){pe().then((function(e){e.allSuccess&&(0,S.Z.getState().logSuccess)("Success","Swap Success!")}))},children:"Swap"}),(0,r.jsx)(ye,{})]})}var be=function(){return(0,r.jsxs)(ve,{children:[(0,r.jsx)(he,{}),(0,r.jsx)("div",{style:{padding:"env(safe-area-inset-top, 0px) env(safe-area-inset-right, 0px) env(safe-area-inset-bottom, 0px) env(safe-area-inset-left, 0px)",position:"relative",display:"grid",gridTemplate:'\n          "d d d" auto\n          "a a a" auto\n          "b c c" 1fr\n          "b c c" 1fr / auto 1fr 1fr',overflow:"hidden",willChange:"opacity"},className:"w-screen mobile:w-full h-screen mobile:h-full",children:(0,r.jsxs)("main",{className:"PageLayoutContent relative isolate flex-container grid-area-c bg-gradient-to-b from-[#0c0927] to-[#110d36] rounded-tl-3xl mobile:rounded-none p-12 pb-4 pt-5 mobile:py-2 mobile:px-3",style:{overflowX:"hidden",overflowY:"scroll"},children:[(0,r.jsx)(u.Z,{className:"justify-center mb-12 mobile:mb-2",children:(0,r.jsx)(c.Z,{currentValue:"Swap",values:["Swap","Liquidity"],onChange:function(e){"Liquidity"===e&&(0,h.E)("/liquidity")}})}),(0,r.jsx)(Ze,{})]})})]})};function ge(e){var n,t,o,c,a=e.className,l=(0,m.Z)((function(e){return e.priceImpact})),s=(0,m.Z)((function(e){return e.coin1})),d=(0,m.Z)((function(e){return e.coin2})),f=(0,m.Z)((function(e){return e.focusSide})),v=(0,m.Z)((function(e){return e.minReceived})),h=(0,m.Z)((function(e){return e.fee})),Z=(0,m.Z)((function(e){return e.maxSpent})),b=(0,p.Z)((function(e){return e.slippageTolerance})),g=(0,i.useMemo)((function(){return null!=l&&(0,x.eg)(l,.05)}),[l]),y=(0,i.useMemo)((function(){return null!=l&&(0,x.eg)(l,.01)}),[l]),w=(0,p.Z)((function(e){return e.isApprovePanelShown}));return(0,r.jsxs)(B.Z,{className:(0,R.m)("py-4 px-6 flex-grow border-1.5  ".concat(g?"border-[#DA2EEF]":y?"border-[rgba(216,203,57,.5)]":"border-[rgba(171,196,255,.5)]"," rounded-xl items-center gap-3 transition-colors"),a),children:[Z?(0,r.jsx)(Se,{fieldName:"Maximum Spent",fieldValue:"".concat(null!==Z&&void 0!==Z?Z:""," ").concat(null!==(o=null===(n="coin1"===f?d:s)||void 0===n?void 0:n.symbol)&&void 0!==o?o:"--"),tooltipContent:"The max amount of tokens you will spend on this trade"}):(0,r.jsx)(Se,{fieldName:"Minimum Received",fieldValue:"".concat(null!==v&&void 0!==v?v:""," ").concat(null!==(c=null===(t="coin1"===f?d:s)||void 0===t?void 0:t.symbol)&&void 0!==c?c:"--"),tooltipContent:"The least amount of tokens you will recieve on this trade"}),(0,r.jsx)(Se,{fieldName:"Price Impact",fieldNameTextColor:g?"#DA2EEF":y?"#D8CB39":void 0,fieldValue:l?(0,x.lt)(l,.001)?"<0.1%":ce(l):"--",fieldValueTextColor:g?"#DA2EEF":y?"#D8CB39":"#39D0D8",tooltipContent:"The difference between the market price and estimated price due to trade size"}),(0,r.jsx)(Se,{fieldName:"Slippage Tolerance",tooltipContent:"The maximum difference between your estimated price and execution price",fieldValue:(0,r.jsxs)(u.Z,{className:"py-1 px-2 bg-[#141041] rounded-sm text-[#F1F1F2] font-medium text-xs -my-1",children:[(0,r.jsx)(re.Z,{className:"w-6",disabled:w,value:(0,j.B)((0,E.dC)(b,100),{decimalLength:"auto 2"}),onUserInput:function(e){var n=(0,E.hi)(parseFloat(e),100);n&&p.Z.setState({slippageTolerance:n})},pattern:/^\d*\.?\d*$/}),(0,r.jsx)("div",{className:"opacity-50 ml-1",children:"%"})]})}),(0,r.jsx)(Se,{fieldName:"Swap Fee",tooltipContent:"Swap Fee",fieldValue:h?(0,r.jsx)(B.Z,{children:(0,r.jsxs)("div",{className:"text-right",children:[(0,j.B)(h)," ",h.currency.symbol]},h.currency.symbol)}):"--"})]})}function ye(){var e=(0,f.Z)((function(e){return e.solBalance})),n=(0,E.hi)(e,Math.pow(10,N.Bk));return(0,r.jsx)(I.U,{children:(0,r.jsxs)(u.Z,{className:"text-sm mt-2 text-[#D8CB39] items-center justify-center",children:["SOL balance: ",(0,j.B)(n)," "]})})}function we(e){var n,t,o=e.className,c=(0,i.useState)(!1),a=c[0],l=c[1],s=(0,m.Z)((function(e){return e.coin1})),d=(0,m.Z)((function(e){return e.coin2})),f=(0,m.Z)((function(e){return e.directionReversed})),v=f?d:s,h=f?s:d,Z=(0,m.Z)((function(e){return e.executionPrice})),b=(0,m.Z)((function(e){return e.priceImpact})),g=(0,i.useMemo)((function(){return null!=b&&(0,x.eg)(b,.05)}),[b]),y=(0,i.useMemo)((function(){return null!=b&&(0,x.eg)(b,.01)}),[b]),w=(0,p.Z)((function(e){return e.isMobile})),S=a?h:v,P=a?v:h;return(0,r.jsxs)(B.Z,{children:[(0,r.jsx)(I.U,{children:Z&&(0,r.jsxs)(u.Z,{className:(0,R.m)("font-medium text-sm text-[#ABC4FF]",o),children:[(0,r.jsxs)("div",{className:"whitespace-nowrap",children:[1," ",null!==(n=null===S||void 0===S?void 0:S.symbol)&&void 0!==n?n:"--"," \u2248"," ",(0,j.B)(a?(0,E.hi)(1,Z):Z,{decimalLength:w?"auto 2":"auto",zeroDecimalNotAuto:!0})," ",null!==(t=null===P||void 0===P?void 0:P.symbol)&&void 0!==t?t:"--"]}),(0,r.jsx)("div",{className:"ml-2 clickable",onClick:function(){return l((function(e){return!e}))},children:"\u21cb"})]})}),(0,r.jsx)(I.U,{children:b?(0,r.jsx)("div",{className:"font-medium text-xs whitespace-nowrap ".concat(g?"text-[#DA2EEF]":y?"text-[#D8CB39]":"text-[#39D0D8]"," transition-colors"),children:g||y?"Price Impact Warning":"Low Price Impact"}):null})]})}function Se(e){var n=e.className,t=e.fieldName,o=e.fieldValue,i=e.tooltipContent,c=e.fieldNameTextColor,a=e.fieldValueTextColor;return(0,r.jsxs)(u.Z,{className:(0,R.m)("w-full justify-between",n),children:[(0,r.jsxs)(u.Z,{className:"items-center text-xs font-medium text-[#ABC4FF]",style:{color:c},children:[(0,r.jsx)("div",{className:"mr-1",children:t}),i&&(0,r.jsxs)(oe.Z,{className:n,placement:"bottom-right",children:[(0,r.jsx)(T.Z,{size:"xs",heroIconName:"question-mark-circle",className:"cursor-help"}),(0,r.jsx)(oe.Z.Panel,{children:(0,r.jsx)("div",{className:"max-w-[30em]",children:i})})]})]}),(0,r.jsx)("div",{className:"text-xs font-medium text-white",style:{color:a},children:o})]})}}},function(e){e.O(0,[480,774,888,179],(function(){return n=8229,e(e.s=n);var n}));var n=e.O();_N_E=n}]);